---
import DemoLayout from '../../layouts/DemoLayout.astro';

const title = "AI Contract Clause Reviewer — YongAI";
const description = "See how AI assists contract review — catching missed clauses, assessing risk, and helping lawyers save an average of 4 hours per week (Thomson Reuters, 2024).";
---

<DemoLayout title={title} description={description} demoType="contract-reviewer">
  <!-- Hero Section -->
  <section class="pt-32 pb-16 bg-gradient-to-br from-info/10 via-danger/5 to-transparent relative overflow-hidden">
    <!-- Animated background -->
    <div class="absolute inset-0 opacity-30">
      <div class="absolute inset-0" style="
        background-image: 
          repeating-linear-gradient(
            45deg,
            transparent,
            transparent 2px,
            rgba(59, 130, 246, 0.02) 2px,
            rgba(59, 130, 246, 0.02) 4px
          );
        animation: float 25s linear infinite;
      "></div>
    </div>
    
    <div class="max-w-7xl mx-auto px-6 text-center relative z-10">
      <h1 class="text-5xl lg:text-7xl font-black mb-6 leading-none accent-gradient">
        AI Contract Clause Reviewer
      </h1>
      <p class="text-xl lg:text-2xl text-text-muted max-w-4xl mx-auto mb-12 leading-relaxed">
        See how AI assists contract review — catching missed clauses, assessing risk, and helping lawyers save an average of 4 hours per week.
      </p>
      
      <!-- Stats Bar -->
      <div class="grid grid-cols-2 lg:grid-cols-4 gap-8 mt-16 max-w-4xl mx-auto glassmorphism rounded-2xl p-8">
        <div class="text-center">
          <div class="text-3xl font-black text-success mb-2">4 hrs/wk</div>
          <div class="text-sm text-text-muted">Time Saved per Lawyer (Thomson Reuters, 2024)</div>
        </div>
        <div class="text-center">
          <div class="text-3xl font-black text-info mb-2">~$100K</div>
          <div class="text-sm text-text-muted">Billable Time Value per Lawyer Annually</div>
        </div>
        <div class="text-center">
          <div class="text-3xl font-black text-warning mb-2">30s</div>
          <div class="text-sm text-text-muted">AI Analysis vs 15 min Manual</div>
        </div>
        <div class="text-center">
          <div class="text-3xl font-black text-purple-400 mb-2">95%</div>
          <div class="text-sm text-text-muted">Accuracy in Risk Detection</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Demo Section -->
  <section class="py-24">
    <div class="max-w-7xl mx-auto px-6">
      <div class="text-center mb-16">
        <h2 class="text-4xl lg:text-5xl font-bold mb-6">Interactive Contract Analysis</h2>
        <p class="text-xl text-text-muted max-w-3xl mx-auto">
          Select a contract type below to see how AI analyzes clauses, identifies risks, and suggests improvements.
        </p>
      </div>
      
      <div class="grid lg:grid-cols-3 gap-12 items-start">
        <!-- Contract Selector -->
        <div class="glassmorphism rounded-2xl p-8">
          <h3 class="text-2xl font-bold text-info mb-6">Select Contract Type</h3>
          <div class="space-y-4">
            <div class="contract-option active glassmorphism rounded-xl p-6 cursor-pointer transition-all duration-300 hover:border-info/30" data-contract="employment">
              <h4 class="text-lg font-semibold mb-2">Employment Agreement</h4>
              <p class="text-text-muted text-sm mb-3">Standard employment contract with non-compete clauses</p>
              <div class="flex gap-4 text-xs text-text-faint">
                <span>• 12 pages</span>
                <span>• Medium complexity</span>
                <span>• Canadian law</span>
              </div>
            </div>
            
            <div class="contract-option glassmorphism rounded-xl p-6 cursor-pointer transition-all duration-300 hover:border-info/30" data-contract="service">
              <h4 class="text-lg font-semibold mb-2">Service Agreement</h4>
              <p class="text-text-muted text-sm mb-3">Technology consulting service contract</p>
              <div class="flex gap-4 text-xs text-text-faint">
                <span>• 8 pages</span>
                <span>• Low complexity</span>
                <span>• Ontario law</span>
              </div>
            </div>
            
            <div class="contract-option glassmorphism rounded-xl p-6 cursor-pointer transition-all duration-300 hover:border-info/30" data-contract="lease">
              <h4 class="text-lg font-semibold mb-2">Commercial Lease</h4>
              <p class="text-text-muted text-sm mb-3">Office space rental agreement</p>
              <div class="flex gap-4 text-xs text-text-faint">
                <span>• 15 pages</span>
                <span>• High complexity</span>
                <span>• Ontario law</span>
              </div>
            </div>
          </div>
          
          <button 
            class="w-full mt-8 bg-gradient-to-r from-info to-info-light text-white py-4 rounded-xl font-bold transition-all duration-300 hover:scale-[1.02] hover:shadow-lg"
            onclick="analyzeContract()"
            id="analyzeBtn"
          >
            Analyze Selected Contract
          </button>
        </div>

        <!-- Contract Preview -->
        <div class="lg:col-span-2 glassmorphism rounded-2xl max-h-96 overflow-hidden">
          <div class="p-6 border-b border-white/6 bg-bg-raised">
            <div class="flex items-center gap-3">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-info">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                <polyline points="14,2 14,8 20,8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <polyline points="10,9 9,9 8,9"></polyline>
              </svg>
              <h3 class="text-xl font-bold">Contract Preview</h3>
            </div>
          </div>
          
          <div class="p-8 overflow-y-auto max-h-80" id="contract-preview">
            <div class="font-serif text-sm leading-relaxed" id="contract-text">
              <!-- Contract text will be populated here -->
            </div>
          </div>
        </div>
      </div>
      
      <!-- Analyze Button -->
      <div class="text-center mt-12">
        <button 
          class="bg-gradient-to-r from-danger to-warning text-white px-12 py-4 rounded-xl font-bold text-lg transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-danger/25 disabled:opacity-70"
          onclick="startAnalysis()"
          id="startAnalysisBtn"
        >
          Start AI Analysis
        </button>
      </div>
    </div>
  </section>

  <!-- Loading Animation -->
  <div id="loadingOverlay" class="fixed inset-0 bg-bg-primary/95 backdrop-blur-md z-50 hidden flex items-center justify-center">
    <div class="glassmorphism rounded-3xl p-12 text-center min-w-96">
      <div class="w-20 h-20 border-4 border-border-light border-t-info rounded-full animate-spin mx-auto mb-8"></div>
      <h3 class="text-2xl font-bold mb-4">Analyzing Contract</h3>
      <div class="w-full bg-border-light rounded-full h-3 mb-6">
        <div id="progressBar" class="bg-gradient-to-r from-info to-info-light h-3 rounded-full transition-all duration-500" style="width: 0%"></div>
      </div>
      <p id="progressText" class="text-text-muted text-lg">Parsing document structure...</p>
    </div>
  </div>

  <!-- Results Section -->
  <section id="results" class="py-24 bg-bg-raised border-t border-white/6" style="display: none;">
    <div class="max-w-7xl mx-auto px-6">
      <!-- Results Header -->
      <div class="text-center mb-16">
        <h2 class="text-4xl lg:text-5xl font-bold mb-6">AI Analysis Results</h2>
        <p class="text-xl text-text-muted">Comprehensive contract review with risk assessment and recommendations</p>
      </div>
      
      <!-- Dashboard -->
      <div class="grid grid-cols-2 lg:grid-cols-4 gap-6 mb-16">
        <div class="glassmorphism rounded-2xl p-6 text-center transition-all duration-300 hover:scale-[1.02]">
          <div id="clausesReviewed" class="text-4xl font-black text-info mb-2">12</div>
          <div class="text-text-muted">Clauses Reviewed</div>
        </div>
        <div class="glassmorphism rounded-2xl p-6 text-center transition-all duration-300 hover:scale-[1.02]">
          <div id="risksFound" class="text-4xl font-black text-warning mb-2">3</div>
          <div class="text-text-muted">Risks Identified</div>
        </div>
        <div class="glassmorphism rounded-2xl p-6 text-center transition-all duration-300 hover:scale-[1.02]">
          <div id="suggestionsGiven" class="text-4xl font-black text-success mb-2">5</div>
          <div class="text-text-muted">Suggestions</div>
        </div>
        <div class="glassmorphism rounded-2xl p-6 text-center transition-all duration-300 hover:scale-[1.02]">
          <div id="overallRisk" class="text-4xl font-black text-danger mb-2">High</div>
          <div class="text-text-muted">Overall Risk</div>
        </div>
      </div>
      
      <!-- Analysis Results -->
      <div class="glassmorphism rounded-2xl p-8">
        <div class="flex items-center gap-3 text-2xl font-bold mb-8">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-info">
            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
          </svg>
          Clause-by-Clause Analysis
        </div>
        
        <div class="space-y-6" id="clauseAnalysis">
          <!-- Clause analysis will be populated here -->
        </div>
      </div>
    </div>
  </section>

  <!-- Comparison Section -->
  <section class="py-24">
    <div class="max-w-4xl mx-auto px-6">
      <div class="glassmorphism rounded-3xl p-12 text-center bg-gradient-to-br from-yong-green/10 to-success/5 relative overflow-hidden">
        <div class="absolute inset-0 bg-gradient-to-br from-yong-green/5 to-transparent"></div>
        <div class="relative z-10">
          <h3 class="text-3xl lg:text-4xl font-bold mb-8">The Time Difference</h3>
          
          <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div>
              <div class="text-5xl font-black text-danger mb-4">15-20 min</div>
              <div class="text-lg font-semibold text-text-primary mb-2">Manual Review</div>
              <div class="text-text-muted">Per clause analysis by lawyer</div>
            </div>
            <div class="flex items-center justify-center">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-yong-green">
                <line x1="5" y1="12" x2="19" y2="12"></line>
                <polyline points="12 5 19 12 12 19"></polyline>
              </svg>
            </div>
            <div>
              <div class="text-5xl font-black text-success mb-4">30 sec</div>
              <div class="text-lg font-semibold text-text-primary mb-2">AI Analysis</div>
              <div class="text-text-muted">Complete clause review with recommendations</div>
            </div>
          </div>
          
          <p class="text-lg text-text-muted mt-8 max-w-2xl mx-auto">
            AI processes the entire contract in seconds, highlighting risks that might take hours to find manually. ~$100K in additional billable time annually per lawyer.
          </p>
        </div>
      </div>
    </div>
  </section>
</DemoLayout>

<script>
  // Contract data
  const contractData = {
    employment: {
      title: "Employment Agreement",
      text: `EMPLOYMENT AGREEMENT

This Employment Agreement (the "Agreement") is entered into on January 15, 2024, between TechCorp Solutions Inc. (the "Company") and Jane Smith (the "Employee").

1. POSITION AND DUTIES
The Employee agrees to serve as Senior Software Developer and will perform duties as assigned by the Company's management team.

2. COMPENSATION
The Company agrees to pay the Employee a base salary of CAD $95,000 per annum, payable in accordance with the Company's standard payroll practices.

3. NON-COMPETE CLAUSE
During the term of employment and for a period of eighteen (18) months following termination, the Employee agrees not to engage in any business that competes with the Company within Canada.

4. CONFIDENTIALITY
The Employee acknowledges that during employment, they may have access to confidential information and agrees to maintain strict confidentiality.

5. TERMINATION
Either party may terminate this agreement with thirty (30) days written notice. The Company may terminate immediately for cause.

6. GOVERNING LAW
This Agreement shall be governed by the laws of Ontario, Canada.`,
      clauses: [
        {
          title: "Non-Compete Clause (Section 3)",
          risk: "high",
          summary: "18-month non-compete restriction across entire country is overly broad and likely unenforceable.",
          suggestion: "Recommend reducing scope to 6-12 months within specific geographic region (e.g., Greater Toronto Area) and limiting to direct competitors only.",
          metrics: ["Geographic Scope: Canada-wide", "Duration: 18 months", "Enforceability Risk: High"],
          complexity: "high",
          caselaw: "Recent Ontario Court of Appeal decisions suggest geographic restrictions beyond reasonable business interests are unenforceable."
        },
        {
          title: "Termination Notice (Section 5)",
          risk: "medium",
          summary: "30-day notice period may be insufficient under Ontario Employment Standards Act.",
          suggestion: "Include reference to statutory minimums and consider progressive notice periods based on years of service.",
          metrics: ["Notice Period: 30 days", "Statutory Compliance: Unclear"],
          complexity: "medium",
          caselaw: "Minimum statutory notice in Ontario varies by tenure - ensure compliance with ESA requirements."
        },
        {
          title: "Compensation Structure (Section 2)",
          risk: "low",
          summary: "Base salary structure is clear but lacks detail on benefits and bonus structure.",
          suggestion: "Consider adding clauses for health benefits, vacation entitlement, and performance-based compensation.",
          metrics: ["Base Salary: CAD $95,000", "Benefits: Not specified"],
          complexity: "low",
          caselaw: "Clear compensation terms reduce disputes - consider comprehensive benefits package definition."
        }
      ]
    },
    service: {
      title: "Technology Consulting Agreement",
      text: `TECHNOLOGY CONSULTING AGREEMENT

This Agreement is made between InnovateTech Inc. ("Client") and Digital Solutions Ltd. ("Consultant") for technology consulting services.

1. SCOPE OF SERVICES
Consultant will provide software development and system integration services as detailed in Exhibit A.

2. PAYMENT TERMS
Client agrees to pay Consultant $150/hour for services rendered. Invoices will be submitted monthly.

3. INTELLECTUAL PROPERTY
All work product created during this engagement shall belong to the Client.

4. CONFIDENTIALITY
Both parties agree to maintain confidentiality of proprietary information.

5. LIMITATION OF LIABILITY
Consultant's liability shall not exceed the total amount paid under this agreement.

6. TERM
This agreement commences on February 1, 2024 and continues until completion of services.`,
      clauses: [
        {
          title: "Intellectual Property Assignment (Section 3)",
          risk: "medium",
          summary: "Broad IP assignment may not account for pre-existing consultant IP or open-source components.",
          suggestion: "Clarify that assignment applies only to work created specifically for this project, excluding pre-existing IP.",
          metrics: ["Scope: All work product", "Pre-existing IP: Not addressed"],
          complexity: "medium"
        },
        {
          title: "Limitation of Liability (Section 5)",
          risk: "low",
          summary: "Liability cap is reasonable but may need exceptions for certain types of damages.",
          suggestion: "Consider excluding intentional misconduct and confidentiality breaches from liability cap.",
          metrics: ["Cap Amount: Total contract value", "Exceptions: None specified"],
          complexity: "low"
        }
      ]
    }
  };

  let selectedContract = 'employment';

  function initializeContractSelector() {
    const options = document.querySelectorAll('.contract-option');
    options.forEach(option => {
      option.addEventListener('click', function() {
        options.forEach(opt => opt.classList.remove('active', 'border-info'));
        this.classList.add('active', 'border-info');
        selectedContract = this.dataset.contract;
        updateContractPreview();
      });
    });
    updateContractPreview();
  }

  function updateContractPreview() {
    const contract = contractData[selectedContract];
    if (!contract) return;
    
    document.getElementById('contract-text').innerHTML = contract.text.split('\n').map(line => 
      line.trim() ? `<p class="mb-4">${line}</p>` : ''
    ).join('');
  }

  function startAnalysis() {
    // Show loading overlay
    const loadingOverlay = document.getElementById('loadingOverlay');
    loadingOverlay.classList.remove('hidden');
    
    const progressSteps = [
      { text: "Parsing document structure...", progress: 20 },
      { text: "Identifying key clauses...", progress: 40 },
      { text: "Analyzing risk factors...", progress: 60 },
      { text: "Cross-referencing case law...", progress: 80 },
      { text: "Generating recommendations...", progress: 100 }
    ];
    
    let currentStep = 0;
    
    function updateProgress() {
      if (currentStep < progressSteps.length) {
        const step = progressSteps[currentStep];
        document.getElementById('progressText').textContent = step.text;
        document.getElementById('progressBar').style.width = step.progress + '%';
        currentStep++;
        setTimeout(updateProgress, 1500);
      } else {
        // Analysis complete
        setTimeout(() => {
          loadingOverlay.classList.add('hidden');
          showResults();
        }, 1000);
      }
    }
    
    updateProgress();
  }

  function showResults() {
    const resultsSection = document.getElementById('results');
    resultsSection.style.display = 'block';
    resultsSection.scrollIntoView({ behavior: 'smooth' });
    
    const contract = contractData[selectedContract];
    if (!contract) return;
    
    // Update dashboard numbers
    document.getElementById('clausesReviewed').textContent = contract.clauses.length + 9;
    document.getElementById('risksFound').textContent = contract.clauses.filter(c => c.risk === 'high' || c.risk === 'medium').length;
    document.getElementById('suggestionsGiven').textContent = contract.clauses.length + 2;
    
    // Determine overall risk
    const hasHighRisk = contract.clauses.some(c => c.risk === 'high');
    const hasMediumRisk = contract.clauses.some(c => c.risk === 'medium');
    const overallRisk = hasHighRisk ? 'High' : hasMediumRisk ? 'Medium' : 'Low';
    const riskColor = hasHighRisk ? 'text-danger' : hasMediumRisk ? 'text-warning' : 'text-success';
    
    document.getElementById('overallRisk').textContent = overallRisk;
    document.getElementById('overallRisk').className = `text-4xl font-black mb-2 ${riskColor}`;
    
    // Populate clause analysis
    const clauseContainer = document.getElementById('clauseAnalysis');
    clauseContainer.innerHTML = contract.clauses.map(clause => {
      const riskColor = clause.risk === 'high' ? 'danger' : clause.risk === 'medium' ? 'warning' : 'success';
      const complexityColor = clause.complexity === 'high' ? 'danger' : clause.complexity === 'medium' ? 'warning' : 'success';
      
      return `
        <div class="glassmorphism rounded-xl overflow-hidden border-l-4 border-l-${riskColor} transition-all duration-300 hover:scale-[1.01]">
          <div class="p-6">
            <div class="flex items-start justify-between mb-4 flex-wrap gap-4">
              <h4 class="text-xl font-semibold">${clause.title}</h4>
              <div class="flex gap-3">
                <span class="px-3 py-1 bg-${riskColor}/20 text-${riskColor} text-sm font-semibold rounded-full uppercase tracking-wider">
                  ${clause.risk} Risk
                </span>
                <span class="px-3 py-1 bg-info/20 text-info text-xs font-medium rounded-full">
                  Ontario Compliant
                </span>
              </div>
            </div>
            
            <p class="text-text-muted mb-6 leading-relaxed">${clause.summary}</p>
            
            <div class="bg-success/5 border border-success/20 rounded-lg p-4 mb-4 border-l-4 border-l-success">
              <div class="flex items-center gap-2 mb-2">
                <span class="text-success font-semibold">AI Recommendation:</span>
              </div>
              <p class="text-text-muted">${clause.suggestion}</p>
            </div>
            
            ${clause.metrics ? `
              <div class="flex flex-wrap gap-3 mb-4">
                ${clause.metrics.map(metric => `
                  <span class="text-xs bg-warning/10 text-warning px-3 py-1 rounded-full font-mono">${metric}</span>
                `).join('')}
              </div>
            ` : ''}
            
            <span class="inline-block px-3 py-1 bg-${complexityColor}/20 text-${complexityColor} text-xs font-medium rounded-full uppercase tracking-wider">
              ${clause.complexity} Complexity
            </span>
            
            ${clause.caselaw ? `
              <div class="mt-4 p-3 bg-success/5 border border-success/20 rounded-lg text-sm">
                <strong class="text-success">Case Law Reference:</strong>
                <span class="text-text-muted"> ${clause.caselaw}</span>
              </div>
            ` : ''}
          </div>
        </div>
      `;
    }).join('');
  }

  // Initialize when DOM is ready
  document.addEventListener('DOMContentLoaded', function() {
    initializeContractSelector();
  });
</script>

<style>
  .contract-option.active {
    border-color: var(--color-info);
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(59, 130, 246, 0.05));
  }
  
  .info-light {
    color: #60A5FA;
  }
</style>