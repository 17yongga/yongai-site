---
export interface Props {
  tier: string;
  title: string;
  price: string;
  term: string;
  description: string;
  features: string[];
  buttonText: string;
  featured?: boolean;
  badgeText?: string;
}

const { 
  tier, 
  title, 
  price, 
  term, 
  description, 
  features, 
  buttonText, 
  featured = false,
  badgeText = "Most Popular"
} = Astro.props;

// Map tier to icon type
const tierIcons: Record<string, string> = {
  "Tier 1": "audit",
  "Tier 2": "build", 
  "Tier 3": "partner"
};
const iconType = tierIcons[tier] || "audit";
---

<div class={`relative glassmorphism rounded-2xl p-8 h-full flex flex-col transition-all duration-300 hover:scale-[1.02] hover:border-yong-green/30 stagger-card ${featured ? 'border-yong-green/50 bg-gradient-to-b from-yong-green/5 via-transparent to-transparent' : ''}`}>
  {featured && (
    <div class="absolute -top-4 left-1/2 transform -translate-x-1/2 bg-yong-green text-white text-xs font-bold py-2 px-6 rounded-full uppercase tracking-wider">
      {badgeText}
    </div>
  )}
  
  <!-- Decorative SVG background pattern -->
  <svg class="absolute top-0 right-0 w-32 h-32 opacity-[0.04] pointer-events-none" viewBox="0 0 120 120" aria-hidden="true">
    {iconType === "audit" && (
      <g>
        <circle cx="80" cy="40" r="25" stroke="currentColor" stroke-width="1.5" fill="none"/>
        <line x1="98" y1="58" x2="115" y2="75" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        <circle cx="70" cy="30" r="3" fill="currentColor" opacity="0.5"/>
        <circle cx="90" cy="35" r="2" fill="currentColor" opacity="0.3"/>
        <circle cx="75" cy="50" r="2" fill="currentColor" opacity="0.4"/>
      </g>
    )}
    {iconType === "build" && (
      <g>
        <rect x="50" y="20" width="40" height="50" rx="4" stroke="currentColor" stroke-width="1.5" fill="none"/>
        <line x1="58" y1="35" x2="82" y2="35" stroke="currentColor" stroke-width="1" opacity="0.5"/>
        <line x1="58" y1="42" x2="75" y2="42" stroke="currentColor" stroke-width="1" opacity="0.5"/>
        <line x1="58" y1="49" x2="78" y2="49" stroke="currentColor" stroke-width="1" opacity="0.5"/>
        <polygon points="70,70 60,85 80,85" stroke="currentColor" stroke-width="1.5" fill="none"/>
        <line x1="70" y1="75" x2="70" y2="82" stroke="currentColor" stroke-width="1"/>
      </g>
    )}
    {iconType === "partner" && (
      <g>
        <circle cx="65" cy="40" r="20" stroke="currentColor" stroke-width="1.5" fill="none"/>
        <path d="M 50 55 Q 65 70, 80 55" stroke="currentColor" stroke-width="1.5" fill="none"/>
        <circle cx="55" cy="35" r="3" fill="currentColor" opacity="0.3"/>
        <circle cx="75" cy="35" r="3" fill="currentColor" opacity="0.3"/>
        <path d="M 45 60 C 45 80, 85 80, 85 60" stroke="currentColor" stroke-width="1" fill="none" opacity="0.5"/>
      </g>
    )}
  </svg>

  <div class="mb-8 relative z-10">
    <!-- Tier icon -->
    <div class="mb-4">
      <svg class="w-10 h-10" viewBox="0 0 40 40" fill="none" aria-hidden="true">
        {iconType === "audit" && (
          <g>
            <circle cx="17" cy="17" r="10" stroke={featured ? '#3fb950' : '#8A8F9E'} stroke-width="1.5" fill="none"/>
            <line x1="24" y1="24" x2="34" y2="34" stroke={featured ? '#3fb950' : '#8A8F9E'} stroke-width="2" stroke-linecap="round"/>
            <path d="M 12 17 L 17 17 L 17 12" stroke={featured ? '#56d364' : '#555B6E'} stroke-width="1" fill="none" opacity="0.6"/>
          </g>
        )}
        {iconType === "build" && (
          <g>
            <rect x="4" y="8" width="16" height="24" rx="2" stroke={featured ? '#3fb950' : '#8A8F9E'} stroke-width="1.5" fill="none"/>
            <rect x="20" y="4" width="16" height="28" rx="2" stroke={featured ? '#56d364' : '#555B6E'} stroke-width="1.5" fill="none"/>
            <line x1="24" y1="12" x2="32" y2="12" stroke={featured ? '#3fb950' : '#8A8F9E'} stroke-width="1" opacity="0.5"/>
            <line x1="24" y1="16" x2="30" y2="16" stroke={featured ? '#3fb950' : '#8A8F9E'} stroke-width="1" opacity="0.5"/>
            <line x1="24" y1="20" x2="32" y2="20" stroke={featured ? '#3fb950' : '#8A8F9E'} stroke-width="1" opacity="0.5"/>
            <circle cx="12" cy="20" r="4" stroke={featured ? '#3fb950' : '#8A8F9E'} stroke-width="1" fill="none"/>
            <polyline points="10,20 12,22 15,18" stroke={featured ? '#3fb950' : '#8A8F9E'} stroke-width="1" fill="none"/>
          </g>
        )}
        {iconType === "partner" && (
          <g>
            <circle cx="14" cy="14" r="5" stroke={featured ? '#3fb950' : '#8A8F9E'} stroke-width="1.5" fill="none"/>
            <circle cx="26" cy="14" r="5" stroke={featured ? '#56d364' : '#555B6E'} stroke-width="1.5" fill="none"/>
            <path d="M 6 30 C 6 22 14 20 14 20" stroke={featured ? '#3fb950' : '#8A8F9E'} stroke-width="1.5" fill="none"/>
            <path d="M 34 30 C 34 22 26 20 26 20" stroke={featured ? '#56d364' : '#555B6E'} stroke-width="1.5" fill="none"/>
            <path d="M 14 28 L 20 24 L 26 28" stroke={featured ? '#3fb950' : '#8A8F9E'} stroke-width="1" fill="none" opacity="0.5"/>
          </g>
        )}
      </svg>
    </div>
    
    <div class="text-sm font-mono font-semibold text-text-faint mb-2 uppercase tracking-wider">
      {tier}
    </div>
    <h3 class="text-2xl font-bold mb-4">{title}</h3>
    <div class="mb-3">
      <span class="text-4xl font-black font-mono">{price}</span>
      <span class="text-text-muted ml-2">{term}</span>
    </div>
    <p class="text-text-muted leading-relaxed">{description}</p>
  </div>
  
  <ul class="space-y-4 flex-1 mb-8">
    {features.map((feature) => (
      <li class="flex items-start gap-3">
        <svg class="w-5 h-5 text-yong-green mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path>
        </svg>
        <span class="text-text-muted leading-relaxed">{feature}</span>
      </li>
    ))}
  </ul>
  
  <a 
    href="#contact" 
    class={`w-full py-4 px-6 rounded-xl font-semibold text-center transition-all duration-300 hover:scale-[1.02] btn-animate ${
      featured 
        ? 'bg-gradient-to-r from-yong-green to-yong-green-light text-white hover:shadow-lg hover:shadow-yong-green/25' 
        : 'glassmorphism border border-border-light hover:border-yong-green/30 text-text-primary'
    }`}
  >
    {buttonText}
  </a>
</div>
